"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@chakra-ui/react"),t=require("react"),l=require("react-helmet"),a=require("@chakra-ui/icons"),n=require("react-icons/fi"),r=require("react-router-dom"),i=require("react-error-boundary");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=o(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function c(e,t){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(l[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(l[a[n]]=e[a[n]])}return l}function s(e,t,l,a){return new(l||(l=Promise))((function(n,r){function i(e){try{u(a.next(e))}catch(e){r(e)}}function o(e){try{u(a.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(i,o)}u((a=a.apply(e,t||[])).next())}))}const d=({children:e,route:t})=>u.default.createElement(u.default.Fragment,null,u.default.createElement(l.Helmet,null,u.default.createElement("title",null,t.title)),e);function f({error:t,resetErrorBoundary:l}){return u.default.createElement(e.Alert,{status:"error",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px"},u.default.createElement(e.AlertIcon,{boxSize:"40px",mr:0}),u.default.createElement(e.AlertTitle,{mt:4,mb:1,fontSize:"lg"},"مشکلی رخ داده است."),u.default.createElement(e.AlertDescription,{maxWidth:"sm"},t.message),u.default.createElement(e.Button,{variant:"outline",colorScheme:"red",mt:"5",onClick:()=>window.location.reload()},"بارگذاری مجدد"))}const m=({toggleDrawer:t,userName:l,menuContentList:r})=>u.default.createElement(e.Flex,{bg:"white",color:"black",boxShadow:"md",justifyContent:"space-between",px:{base:"4",md:"10"},h:{base:"75px",md:"75px"},alignItems:"center",position:"relative",zIndex:10},u.default.createElement(e.IconButton,{display:{lg:"none"},variant:"unstyled","aria-label":"اعلانات",size:"lg",icon:u.default.createElement(n.FiAlignRight,null),onClick:t}),u.default.createElement(e.Flex,null,u.default.createElement(e.Image,{src:"/assets/Logo.svg",w:{base:"36",lg:"48"},h:{base:"12",md:"full"},mx:"auto"})),u.default.createElement(e.Flex,{align:"center",justifyContent:"end"},u.default.createElement(e.HStack,{spacing:"4"},u.default.createElement(e.IconButton,{variant:"ghost","aria-label":"اعلانات",icon:u.default.createElement(n.FiBell,null),display:{base:"none",lg:"flex"}}),u.default.createElement(e.Avatar,{display:{base:"none",lg:"initial"}}),u.default.createElement(e.Menu,null,u.default.createElement(u.default.Fragment,null,u.default.createElement(e.MenuButton,{as:e.Button,rightIcon:u.default.createElement(a.ChevronDownIcon,null),bg:"transparent",fontSize:"sm"},l),r)))));function p(t){var{sidebarSize:l,children:a,to:n}=t,i=c(t,["sidebarSize","children","to"]);return u.default.createElement(r.NavLink,Object.assign({to:n},i,{style:{width:"large"===l?"100%":"initial"}}),(({isActive:t})=>u.default.createElement(e.Box,{p:"3",bg:t?"#f2f7ff":"initial",color:t?"#0066ff":"initial",borderRadius:"lg",borderLeft:t?"5px solid #0066ff":"none",_hover:{textDecor:"none",color:"#0066ff",bg:"#f2f7ff"}},a)))}const E=({sidebarSize:t,icon:l,title:a,link:n,variant:r})=>{const{isOpen:i,onOpen:o,onClose:c}=e.useDisclosure();return u.default.createElement(e.Flex,{mt:"2",flexDir:"column",w:"100%",alignItems:"small"===t?"center":"flex-start",color:"gray.600",fontSize:"sm",borderLeft:"3px"},"sidebar"===r?u.default.createElement(e.Menu,{placement:"start",isOpen:i},u.default.createElement(p,{to:n,sidebarSize:t},u.default.createElement(e.MenuButton,{w:"full",onMouseEnter:o,onMouseLeave:c},u.default.createElement(e.Flex,{align:"center"},u.default.createElement(e.Icon,{as:l,fontSize:"xl"}),u.default.createElement(e.Text,{fontSize:"md",ms:"5",display:"small"===t?"none":"flex"},a))))):u.default.createElement(p,{to:n,sidebarSize:t},u.default.createElement(e.Flex,{align:"center"},u.default.createElement(e.Icon,{as:l,fontSize:"xl"}),u.default.createElement(e.Text,{ms:"5",display:"small"===t?"none":"flex"},a))))},x=({sidebarSize:t,sidebarSizeSetter:l,variant:a,isDrawerOpen:r,drawerOnClose:i,ctx:o,title:c,subTitle:s,avatarSource:d})=>"sidebar"===a?u.default.createElement(e.Flex,{h:"calc(100vh - 75px)",overflowY:"scroll",w:"small"===t?"75px":"350px",ps:"small"===t?"initial":"50px",boxShadow:"lg",flexDir:"column",justifyContent:"space-between",transition:"all 0.5s",zIndex:1},u.default.createElement(e.Flex,{p:"2",flexDir:"column",alignItems:"small"===t?"center":"flex-start",as:"nav"},u.default.createElement(e.IconButton,{"aria-label":"",_hover:{bg:"none"},variant:"outline",icon:"small"===t?u.default.createElement(n.FiChevronLeft,null):u.default.createElement(n.FiChevronRight,null),onClick:()=>l("small"===t?"large":"small"),alignSelf:"small"===t?"center":"end"}),o.map((e=>u.default.createElement(E,{variant:a,key:e.path,icon:e.icon,sidebarSize:t,title:e.title,link:e.path})))),u.default.createElement(e.Flex,{p:"4",flexDirection:"column",w:"100%",alignItems:"small"===t?"center":"flex-start"},u.default.createElement(e.Divider,{display:"small"===t?"none":"flex"}),u.default.createElement(e.Flex,{mt:"4",align:"center"},u.default.createElement(e.Avatar,{src:d},u.default.createElement(e.AvatarBadge,{boxSize:"1.25em",bg:"green.500"})),u.default.createElement(e.Flex,{display:"small"===t?"none":"flex",flexDir:"column",ms:"4"},u.default.createElement(e.Heading,{as:"h3",size:"sm"},c),u.default.createElement(e.Text,{fontSize:"xs"},s))))):u.default.createElement(e.Drawer,{isOpen:r,placement:"right",onClose:i,size:{base:"xs",sm:"sm",md:"md"}},u.default.createElement(e.DrawerOverlay,null,u.default.createElement(e.DrawerContent,null,u.default.createElement(e.DrawerCloseButton,null),u.default.createElement(e.DrawerHeader,null),u.default.createElement(e.DrawerBody,null,o.map((e=>u.default.createElement(E,{variant:a,key:e.path,icon:e.icon,sidebarSize:t,title:e.title,link:e.path}))))))),b=t=>{var l=c(t,[]);const[a,n]=u.default.useState("large"),o={navigation:"drawer",navigationButton:!0},s=e.useBreakpointValue({base:o,sm:o,md:o,lg:{navigation:"sidebar",navigationButton:!1}});let d=r.useLocation();const[p,E]=e.useBoolean();return u.default.createElement(u.default.Fragment,null,u.default.createElement(m,{toggleDrawer:E.on,userName:l.navbarTitle,menuContentList:l.headerMenuContentList}),u.default.createElement(e.Flex,null,u.default.createElement(x,{ctx:[...l.sidebarRoutes],sidebarSize:a,sidebarSizeSetter:n,isDrawerOpen:p,drawerOnClose:E.off,variant:null==s?void 0:s.navigation,title:l.sidebarTitle,subTitle:l.sidebarSubTitle,avatarSource:l.sidebarAvatarSrc}),u.default.createElement(e.Box,{h:"calc(100vh - 75px)",display:"inline-block",w:"sidebar"===(null==s?void 0:s.navigation)?"small"===a?"calc(100vw - 75px)":"calc(100vw - 350px)":"full",bg:"#f5f7fc",p:{base:"4",md:"6",lg:"12"},overflowY:"scroll"},u.default.createElement(i.ErrorBoundary,{FallbackComponent:f,resetKeys:[d]},u.default.createElement(e.ScaleFade,{key:d.pathname,initialScale:.6,in:!0},u.default.createElement(r.Outlet,null))))))};let h=u.default.createContext(null);function g({children:l,authStatusChecker:a}){let[n,r]=u.default.useState(!1);t.useEffect((()=>{(()=>s(this,void 0,void 0,(function*(){a().then((()=>r(!0))).catch((()=>r(!1)))})))().catch((e=>{console.log(e)}))}),[a]);let i={isAuthenticated:n,signin:(e,t)=>{},signout:e=>{}};return n?u.default.createElement(h.Provider,{value:i},l):u.default.createElement(e.Center,{py:"12"},u.default.createElement(e.Spinner,{size:"xl",colorScheme:"blue"}))}exports.LayoutRenderer=t=>{var l,a=c(t,[]);let n=r.useLocation(),i=a.routes.find((e=>{var t;return!!e.isInModal&&!!e.backgroundPath&&e.path===n.pathname||!!e.isInModal&&!!e.backgroundPath&&n.pathname.includes(e.path.substring(0,e.path.indexOf(null!==(t=e.routeDynamicSection)&&void 0!==t?t:"$"))||"$")}));return u.default.createElement(g,{authStatusChecker:a.authStatusChecker},u.default.createElement(r.Routes,{location:null!==(l=null==i?void 0:i.backgroundPath)&&void 0!==l?l:n},u.default.createElement(r.Route,{path:"/",element:u.default.createElement(b,Object.assign({},a,{sidebarRoutes:a.routes.filter((e=>e.isInSidebar)).map((e=>({description:e.description,icon:e.icon,path:e.path,title:e.title})))}))},u.default.createElement(r.Route,{index:!0,element:a.indexComponent}),a.routes.filter((e=>!e.isIndex&&!e.isInModal)).map((t=>{var l=t.component;return u.default.createElement(r.Route,{key:t.path,path:t.path,element:u.default.createElement(u.default.Suspense,{fallback:u.default.createElement(e.Center,{w:"full"},u.default.createElement(e.Spinner,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"#1d68d2",size:"xl"}))},u.default.createElement(d,{route:t},u.default.createElement(l,null)))})})),u.default.createElement(r.Route,{path:"*",element:u.default.createElement(e.Center,{w:"full"},"404")}))),i&&u.default.createElement(r.Routes,null,a.routes.filter((e=>!e.isIndex&&e.isInModal)).map((t=>{var l=t.component;return u.default.createElement(r.Route,{key:t.path,path:t.path,element:u.default.createElement(u.default.Suspense,{fallback:u.default.createElement(e.Center,{w:"full"},u.default.createElement(e.Spinner,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"#1d68d2",size:"xl"}))},u.default.createElement(l,null))})}))))};
