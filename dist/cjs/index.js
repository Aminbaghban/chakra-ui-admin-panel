"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@chakra-ui/react"),t=require("react"),l=require("react-helmet"),a=require("react-icons/fi"),n=require("react-router-dom"),r=require("react-error-boundary");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=i(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function u(e,t){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(l[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(l[a[n]]=e[a[n]])}return l}function c(e,t,l,a){return new(l||(l=Promise))((function(n,r){function i(e){try{u(a.next(e))}catch(e){r(e)}}function o(e){try{u(a.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(i,o)}u((a=a.apply(e,t||[])).next())}))}const s=({children:e,route:t})=>o.default.createElement(o.default.Fragment,null,o.default.createElement(l.Helmet,null,o.default.createElement("title",null,t.title)),e);function d({error:t,resetErrorBoundary:l}){return o.default.createElement(e.Alert,{status:"error",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",height:"200px"},o.default.createElement(e.AlertIcon,{boxSize:"40px",mr:0}),o.default.createElement(e.AlertTitle,{mt:4,mb:1,fontSize:"lg"},"مشکلی رخ داده است."),o.default.createElement(e.AlertDescription,{maxWidth:"sm"},t.message),o.default.createElement(e.Button,{variant:"outline",colorScheme:"red",mt:"5",onClick:()=>window.location.reload()},"بارگذاری مجدد"))}const f=({toggleDrawer:t,linkProps:l,toolsBox:r})=>o.default.createElement(e.Flex,{bg:"white",color:"black",boxShadow:"md",justifyContent:"space-between",px:{base:"4",md:"10"},h:{base:"75px",md:"75px"},alignItems:"center",position:"relative",zIndex:10},o.default.createElement(e.IconButton,{display:{lg:"none"},variant:"unstyled","aria-label":"اعلانات",size:"lg",icon:o.default.createElement(a.FiAlignRight,null),onClick:t}),o.default.createElement(e.Flex,null,o.default.createElement(n.Link,Object.assign({to:"#"},l),o.default.createElement(e.Image,{src:"/assets/Logo.svg",w:{base:"36",lg:"48"},h:{base:"12",md:"full"},mx:"auto"}))),o.default.createElement(o.default.Suspense,{fallback:o.default.createElement(e.Spinner,{size:"xs"})},o.default.createElement(r,null)));function m(t){var{sidebarSize:l,children:a,to:r}=t,i=u(t,["sidebarSize","children","to"]);return o.default.createElement(n.NavLink,Object.assign({to:r},i,{style:{width:"large"===l?"100%":"initial"}}),(({isActive:t})=>o.default.createElement(e.Box,{p:"3",bg:t?"#f2f7ff":"initial",color:t?"#0066ff":"initial",borderRadius:"lg",borderLeft:t?"5px solid #0066ff":"none",_hover:{textDecor:"none",color:"#0066ff",bg:"#f2f7ff"}},a)))}const p=({sidebarSize:t,icon:l,title:a,link:n,variant:r,badgeProps:i})=>{const{isOpen:u,onOpen:c,onClose:s}=e.useDisclosure();return o.default.createElement(e.Flex,{mt:"2",flexDir:"column",w:"100%",alignItems:"small"===t?"center":"flex-start",color:"gray.600",fontSize:"sm",borderLeft:"3px"},"sidebar"===r?o.default.createElement(e.Menu,{placement:"start",isOpen:u},o.default.createElement(m,{to:n,sidebarSize:t},o.default.createElement(e.MenuButton,{w:"full",onMouseEnter:c,onMouseLeave:s},o.default.createElement(e.Flex,{align:"center"},o.default.createElement(e.Icon,{as:l,fontSize:"xl"}),o.default.createElement(e.Text,{fontSize:"md",ms:"5",display:"small"===t?"none":"flex"},a),o.default.createElement(e.Spacer,null),!!i&&o.default.createElement(e.Badge,Object.assign({},i),i.children))))):o.default.createElement(m,{to:n,sidebarSize:t},o.default.createElement(e.Flex,{align:"center"},o.default.createElement(e.Icon,{as:l,fontSize:"xl"}),o.default.createElement(e.Text,{ms:"5",display:"small"===t?"none":"flex"},a))))},E=({sidebarSize:t,sidebarSizeSetter:l,variant:n,isDrawerOpen:r,drawerOnClose:i,ctx:u,title:c,subTitle:s,avatarSource:d})=>"sidebar"===n?o.default.createElement(e.Flex,{h:"calc(100vh - 75px)",overflowY:"scroll",w:"small"===t?"75px":"350px",ps:"small"===t?"initial":"50px",boxShadow:"lg",flexDir:"column",justifyContent:"space-between",transition:"all 0.5s",zIndex:1},o.default.createElement(e.Flex,{p:"2",flexDir:"column",alignItems:"small"===t?"center":"flex-start",as:"nav"},o.default.createElement(e.IconButton,{"aria-label":"",_hover:{bg:"none"},variant:"outline",icon:"small"===t?o.default.createElement(a.FiChevronLeft,null):o.default.createElement(a.FiChevronRight,null),onClick:()=>l("small"===t?"large":"small"),alignSelf:"small"===t?"center":"end"}),u.map((e=>o.default.createElement(p,{variant:n,key:e.path,icon:e.icon,sidebarSize:t,title:e.title,link:e.path,badgeProps:e.badgeProps})))),o.default.createElement(e.Flex,{p:"4",flexDirection:"column",w:"100%",alignItems:"small"===t?"center":"flex-start"},o.default.createElement(e.Divider,{display:"small"===t?"none":"flex"}),o.default.createElement(e.Flex,{mt:"4",align:"center"},o.default.createElement(e.Avatar,{src:d},o.default.createElement(e.AvatarBadge,{boxSize:"1.25em",bg:"green.500"})),o.default.createElement(e.Flex,{display:"small"===t?"none":"flex",flexDir:"column",ms:"4"},o.default.createElement(e.Heading,{as:"h3",size:"sm"},c),o.default.createElement(e.Text,{fontSize:"xs"},s))))):o.default.createElement(e.Drawer,{isOpen:r,placement:"right",onClose:i,size:{base:"xs",sm:"sm",md:"md"}},o.default.createElement(e.DrawerOverlay,null,o.default.createElement(e.DrawerContent,null,o.default.createElement(e.DrawerCloseButton,null),o.default.createElement(e.DrawerHeader,null),o.default.createElement(e.DrawerBody,null,u.map((e=>o.default.createElement(p,{variant:n,key:e.path,icon:e.icon,sidebarSize:t,title:e.title,link:e.path}))))))),b=t=>{var l=u(t,[]);const[a,i]=o.default.useState("large"),c={navigation:"drawer",navigationButton:!0},s=e.useBreakpointValue({base:c,sm:c,md:c,lg:{navigation:"sidebar",navigationButton:!1}});let m=n.useLocation();const[p,b]=e.useBoolean();return o.default.createElement(o.default.Fragment,null,o.default.createElement(f,{toggleDrawer:b.on,linkProps:l.logoLinkProps,toolsBox:l.navbarToolsBox}),o.default.createElement(e.Flex,null,o.default.createElement(E,{ctx:[...l.sidebarRoutes],sidebarSize:a,sidebarSizeSetter:i,isDrawerOpen:p,drawerOnClose:b.off,variant:null==s?void 0:s.navigation,title:l.sidebarTitle,subTitle:l.sidebarSubTitle,avatarSource:l.sidebarAvatarSrc}),o.default.createElement(e.Box,{h:"calc(100vh - 75px)",display:"inline-block",w:"sidebar"===(null==s?void 0:s.navigation)?"small"===a?"calc(100vw - 75px)":"calc(100vw - 350px)":"full",bg:"#f5f7fc",p:{base:"4",md:"6",lg:"12"},overflowY:"scroll"},o.default.createElement(r.ErrorBoundary,{FallbackComponent:d,resetKeys:[m]},o.default.createElement(e.ScaleFade,{key:m.pathname,initialScale:.6,in:!0},o.default.createElement(n.Outlet,null))))))};let x=o.default.createContext(null);function g({children:l,authStatusChecker:a}){let[n,r]=o.default.useState(!1);t.useEffect((()=>{(()=>c(this,void 0,void 0,(function*(){a().then((()=>r(!0))).catch((()=>r(!1)))})))().catch((e=>{console.log(e)}))}),[a]);let i={isAuthenticated:n,signin:(e,t)=>{},signout:e=>{}};return n?o.default.createElement(x.Provider,{value:i},l):o.default.createElement(e.Center,{py:"12"},o.default.createElement(e.Spinner,{size:"xl",colorScheme:"blue"}))}const h=t=>{var l;const a=null===(l=t.find((e=>e.isIndex)))||void 0===l?void 0:l.component;return o.default.createElement(o.default.Fragment,null,!!a&&o.default.createElement(n.Route,{index:!0,element:o.default.createElement(o.default.Suspense,{fallback:o.default.createElement(e.Center,{w:"full"},o.default.createElement(e.Spinner,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"#1d68d2",size:"xl"}))},o.default.createElement(a,null))}),t.filter((e=>!e.isIndex&&!e.isInModal)).map((t=>{var l=t.component;return o.default.createElement(n.Route,{key:t.path,path:t.path,element:o.default.createElement(o.default.Suspense,{fallback:o.default.createElement(e.Center,{w:"full"},o.default.createElement(e.Spinner,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"#1d68d2",size:"xl"}))},o.default.createElement(s,{route:t},o.default.createElement(l,null)))},!!t.childRoutes&&h(t.childRoutes))})))};exports.LayoutRenderer=t=>{var l,a=u(t,[]);let r=n.useLocation(),i=a.routes.find((e=>{var t;return!!e.isInModal&&!!e.backgroundPath&&e.path===r.pathname||!!e.isInModal&&!!e.backgroundPath&&r.pathname.includes(e.path.substring(0,e.path.indexOf(null!==(t=e.routeDynamicSection)&&void 0!==t?t:"$"))||"$")}));return o.default.createElement(g,{authStatusChecker:a.authStatusChecker},o.default.createElement(n.Routes,{location:null!==(l=null==i?void 0:i.backgroundPath)&&void 0!==l?l:r},o.default.createElement(n.Route,{path:"/",element:o.default.createElement(b,Object.assign({},a,{sidebarRoutes:a.routes.filter((e=>e.isInSidebar)).map((e=>({description:e.description,icon:e.icon,path:e.path,title:e.title,badgeProps:e.badgeProps})))}))},h(a.routes),o.default.createElement(n.Route,{path:"*",element:o.default.createElement(e.Center,{w:"full"},"404")}))),i&&o.default.createElement(n.Routes,null,a.routes.filter((e=>!e.isIndex&&e.isInModal)).map((t=>{var l=t.component;return o.default.createElement(n.Route,{key:t.path,path:t.path,element:o.default.createElement(o.default.Suspense,{fallback:o.default.createElement(e.Center,{w:"full"},o.default.createElement(e.Spinner,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"#1d68d2",size:"xl"}))},o.default.createElement(l,null))})}))))};
